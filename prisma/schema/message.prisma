model Message {
  id        String       @id @default(cuid())
  matchId   String
  senderId  String
  content   String       @db.Text
  type      MessageType  @default(TEXT)

  // File attachment fields (optional)
  fileUrl   String?
  fileKey   String?      // UploadThing key for deletion
  fileName  String?
  fileSize  Int?
  fileType  String?      // MIME type (e.g., "image/jpeg", "application/pdf")

  createdAt DateTime     @default(now())
  readAt    DateTime?

  // Relations
  match  Match @relation(fields: [matchId], references: [id], onDelete: Cascade)
  sender User  @relation(fields: [senderId], references: [id], onDelete: Cascade)

  @@index([matchId])
  @@index([senderId])
  @@index([createdAt])
}

enum MessageType {
  TEXT
  IMAGE
  FILE
}
